<link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='pygments.css') }}">
{% extends "my_base.html" %}

{% block title %}CSM-Dashboard{% endblock %}

{% block main %}
<div class="container-fluid">
    <div class="row">
        <!-- Fixed Sidebar with Snippets -->
        

        
        <div class="col-md-4 col-lg-3" id="sidebar">
            <div class="list-group" id="code-list">
                <!-- START-->
<a class="btn btn-primary" role="button" href="{{url_for('main.new_snippet')}}"> New Snippet</a><br>
    
{%if selected_snippet%}

  <a class="btn btn-primary" role="button" href="{{url_for('main.edit_snippet', id=selected_snippet.id)}}"> Edit Snippet</a><br>

<button class="btn btn-danger" type="button" data-toggle="modal" data-target="#exampleModalCenter">Delete</button><br>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalCenterTitle">Delete Snippet</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   Are you sure you want to delete this snippet?
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

      <form method="POST" action="{{ url_for('main.delete_snippet', id=selected_snippet.id) }}">
        <button type="submit" class="btn btn-danger">Delete</button>
      </form>
  </div>
</div>
</div>
</div>








{%endif%}
<!-- END-->



                {% for snippet in snippets %}
                <a href="{{ url_for('main.dashboard', snippet_id=snippet.id) }}" class="list-group-item list-group-item-action bg-dark text-white">
                    {{ snippet.title }}
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-8 col-lg-9" id="main-content">
            <!-- Main content here -->
<div class="card border" id="code-card">
            <div class="custom-highlight">

                {% if selected_snippet %}
                

                <h3>{{ selected_snippet.title }}</h3>
                <h5>{{ selected_snippet.date_posted}} </h5>

                <!-- Hidden textarea to hold the text to be copied -->
                <textarea id="hiddenTextarea" style="position: absolute; left: -9999px;">{{ selected_snippet.content }}</textarea>
                <!-- Render the highlighted code -->
                {{ highlighted_code | safe }}
                
                 <!-- Copy button -->
                 <button onclick="copyToClipboard()">Copy Code</button>

                 <script>
                    function copyToClipboard() {
                        var copyText = document.getElementById("hiddenTextarea");
                        copyText.select();
                        copyText.setSelectionRange(0, 99999); // For mobile devices
                        navigator.clipboard.writeText(copyText.value);
                        alert("Copied the code to clipboard!");
                    }
                    </script>
                {% else %}
                <p>Select a snippet from the list to view its content here.</p>
                {% endif %}
            </div>
        </div>
            
           
        </div>
    </div>
</div>
{% endblock %}